!function(e){function t(r){if(a[r])return a[r].exports;var n=a[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function r(e){React.render(React.createElement(i,{url:"/api/articles/"+e.params.id}),document.getElementById("content"))}function n(){React.render(React.createElement(l,{src:"/api/articles",page:!0},React.createElement(u,{filed:"_id",text:"",checkbox:!0}),React.createElement(u,{sort:!0,filed:"title",text:"标题",width:"280px"}),React.createElement(u,{sort:!0,filed:"source",text:"来源"}),React.createElement(u,{filed:"top",text:"置顶"}),React.createElement(u,{filed:"tags",text:"标签"}),React.createElement(u,{sort:!0,filed:"views",text:"浏览量"}),React.createElement(u,{filed:"comments",text:"评论"}),React.createElement(u,{sort:!0,filed:"updated_at",text:"更新日期"})),document.getElementById("content"))}function c(){React.render(React.createElement(l,{src:"/api/tags",page:!0,del:!0},React.createElement(u,{filed:"_id",text:"",checkbox:!0}),React.createElement(u,{sort:!0,filed:"name",text:"标签名"}),React.createElement(u,{sort:!0,filed:"count",text:"文章数"})),document.getElementById("content"))}function o(e,t){React.unmountComponentAtNode(document.getElementById("content")),t()}var i=a(1),s=a(2),l=s.RTable,u=s.RTh;page.base("/admin/react"),page("*",o),page("/",n),page("/article/:id",r),page("/tags",c),page()},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=function(e,t,a){for(var r=!0;r;){var n=e,c=t,o=a;i=l=s=void 0,r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,c);if(void 0!==i){if("value"in i)return i.value;var s=i.get;return void 0===s?void 0:s.call(o)}var l=Object.getPrototypeOf(n);if(null===l)return void 0;e=l,t=c,a=o,r=!0}},o=function(e){function t(){a(this,t),c(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}return r(t,e),n(t,[{key:"loadData",value:function(){var e=this;$.get(this.props.url,function(t){e.assignData(t)})}},{key:"saveData",value:function(e){var t=document.getElementById("submit");t.setAttribute("disabled",!0),$.ajax({url:this.props.url,method:"PUT",data:e,success:function(){t.removeAttribute("disabled")}})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={};_(this.refs).forEach(function(e,r){a[r]="checkbox"==t.refs[r].getDOMNode().type?t.refs[r].getDOMNode().checked:t.refs[r].getDOMNode().value}).value(),this.saveData(a)}},{key:"assignData",value:function(e){var t=this;_(this.refs).forEach(function(a,r){"checkbox"==t.refs[r].getDOMNode().type?t.refs[r].getDOMNode().checked=e[r]:t.refs[r].getDOMNode().value=e[r]||""}).value(),Materialize.updateTextFields();var a=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("tag"),queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:{cache:!1,url:"/api/tags/",filter:function(e){return _.map(e,function(e){return{tag:e.name}})}}});a.initialize(),$("#tags").materialtags({typeaheadjs:{displayName:"tag",displayKey:"tag",valueKey:"tag",source:a.ttAdapter()}});var r=CodeMirror.fromTextArea(this.refs.content.getDOMNode(),{lineNumbers:!0,mode:"gfm",theme:"default",extraKeys:{F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc:function(e){e.getOption("fullScreen")&&e.setOption("fullScreen",!1)}}});r.on("change",function(e){t.refs.content.getDOMNode().value=e.getValue()})}},{key:"componentDidMount",value:function(){this.loadData(),$("select").material_select()}},{key:"render",value:function(){return React.createElement("div",{className:"container"},React.createElement("div",{className:"row"},React.createElement("form",{className:"col s12",onSubmit:this.handleSubmit.bind(this)},React.createElement("div",{className:"row"},React.createElement("div",{className:"input-field col s12"},React.createElement("input",{id:"title",ref:"title",type:"text"}),React.createElement("label",{htmlFor:"content"},"标题")),React.createElement("div",{className:"input-field col s12"},React.createElement("select",{className:""},React.createElement("option",{value:"1"},"生活"),React.createElement("option",{value:"2"},"术业")),React.createElement("label",{htmlFor:""},"类型")),React.createElement("div",{className:"input-field col s12"},React.createElement("textarea",{id:"cont",ref:"content",className:"materialize-textarea"}),React.createElement("label",{htmlFor:"content"},"内容")),React.createElement("div",{className:"input-field col s12"},React.createElement("input",{id:"source",type:"text",ref:"source"}),React.createElement("label",{htmlFor:"source"},"来源")),React.createElement("div",{className:"col s12"},React.createElement("input",{type:"checkbox",id:"top",ref:"top"}),React.createElement("label",{htmlFor:"top"},"置顶")),React.createElement("div",{className:"input-field col s12"},React.createElement("input",{id:"tags",type:"text",ref:"tags"}),React.createElement("label",{htmlFor:"tags",className:"active"},"标签")),React.createElement("div",{className:"input-field col s12"},React.createElement("input",{id:"views",ref:"views",type:"text"}),React.createElement("label",{className:"active",htmlFor:"views"},"浏览量")),React.createElement("div",{className:"input-field col s12"},React.createElement("button",{type:"submit",id:"submit",className:"btn btn-default right"},"提交"))))))}}]),t}(React.Component);t["default"]=o,e.exports=t["default"]},function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=function(e,t,a){for(var r=!0;r;){var n=e,c=t,o=a;i=l=s=void 0,r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,c);if(void 0!==i){if("value"in i)return i.value;var s=i.get;return void 0===s?void 0:s.call(o)}var l=Object.getPrototypeOf(n);if(null===l)return void 0;e=l,t=c,a=o,r=!0}},i=a(3),s=function(e){function t(){r(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.count=0}return n(t,e),c(t,[{key:"renderCheckbox",value:function(e){return React.createElement("div",null,React.createElement("input",{className:"rowCheckbox",type:"checkbox",id:e}),React.createElement("label",{htmlFor:e}))}},{key:"renderLink",value:function(e,t){return React.createElement("a",{href:"./article/"+e},t)}},{key:"renderCell",value:function(e,t){var a=t[e];return"_id"==e&&this.renderCheckbox(a)||"title"==e&&this.renderLink(t._id,a)||"updated_at"==e&&moment(a).format("YYYY-MM-DD HH:mm")||"tags"==e&&a.join("，")||a}},{key:"setRows",value:function(e){var t=this;return this.props.fileds.map(function(a,r){return React.createElement("td",{key:r},t.renderCell(a,e))})}},{key:"render",value:function(){var e=this,t=this.props.data.map(function(t,a){return React.createElement("tr",{key:a},e.setRows(t))});return React.createElement("tbody",null,t)}}]),t}(React.Component),l=function(e){function t(){r(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.state={order:"desc"}}return n(t,e),c(t,[{key:"renderCheckbox",value:function(){return React.createElement("div",null,React.createElement("input",{type:"checkbox",id:"sa"}),React.createElement("label",{htmlFor:"sa"}))}},{key:"renderTH",value:function(){return this.props.checkbox&&this.renderCheckbox()||this.props.sort&&React.createElement("div",null,React.createElement("span",null,this.props.text),React.createElement("i",{className:"desc"==this.state.order?"arrow_down":"arrow_up"}))||this.props.text}},{key:"handleClick",value:function(){this.props.sort&&(this.state.order="desc"==this.state.order?"asc":"desc",this.props.onSort(this.props.filed,this.state.order))}},{key:"render",value:function(){var e=i({sort:this.props.sort});return React.createElement("th",{className:e,onClick:this.handleClick.bind(this),width:this.props.width?this.props.width:null},this.renderTH())}}]),t}(React.Component);t.RTh=l;var u=function(e){function t(e){r(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.pageCount=+e.pagecount||7,this.perCount=+e.percount||10,this.pageActCount=Math.ceil(this.count/this.perCount),this.state={curNum:0}}return n(t,e),c(t,[{key:"renderList",value:function(){this.pageActCount=Math.ceil(this.props.count/this.perCount);var e=[];if(this.pageActCount<this.pageCount)for(var t=0,a=this.pageActCount;a>t;t++)e.push(this.renderPageBtn(t));else{var r=this.state.curNum-3,n=this.state.curNum+4;1>r&&(r=0,n=7),n>this.pageActCount&&(n=this.pageActCount,r=this.pageActCount-7);for(var t=r;n>t;t++)e.push(this.renderPageBtn(t))}return e}},{key:"renderPageBtn",value:function(e){return React.createElement("li",{key:e,className:this.state.curNum==e?"active":"waves-effect"},React.createElement("a",{href:"javascript:;",onClick:this.changeCur.bind(this),"data-pagenum":e+1},e+1))}},{key:"changeCur",value:function(e){var t=+e.target.getAttribute("data-pagenum")-1;this.setState({curNum:t}),this.props.onPageData(t)}},{key:"render",value:function(){var e=this;return React.createElement("ul",{className:"pagination right"},React.createElement("li",{className:"waves-effect"},React.createElement("a",{href:"javascript:;","data-pagenum":"1",onClick:function(t){e.changeCur(t)}},"<")),this.renderList(),React.createElement("li",{className:"waves-effect"},React.createElement("a",{href:"javascript:;","data-pagenum":this.pageActCount,onClick:function(t){e.changeCur(t)}},">")))}}]),t}(React.Component),d=function(e){function t(e){r(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.curnum=0,this.filed="",this.order="",this.originData="",this.state={data:e.data||[],fileds:e.fileds||[]}}return n(t,e),c(t,[{key:"handleUserSort",value:function(e,t){this.filed=e,this.order=t,this.renderData(this.curnum,e,t)}},{key:"handlePage",value:function(e){this.curnum=e,this.renderData(e,this.filed,this.order)}},{key:"renderData",value:function(e,t,a){var r=_.sortByOrder(this.originData,t,a);r=_.take(_.slice(r,10*e),10),this.setState({data:r,fileds:_.pluck(this.props.children,"props.filed")})}},{key:"loadData",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?this.props.src:arguments[0];$.get(t,function(t){e.originData=t,e.renderData(0)})}},{key:"componentDidMount",value:function(){this.loadData(),$("#sa").on("change",function(){var e=$(".rowCheckbox");$(this).is(":checked")?e.prop("checked",!0):e.prop("checked",!1)})}},{key:"componentWillReceiveProps",value:function(e){this.props.src!=e.src&&(this.loadData(e.src),$("#sa").on("change",function(){var e=$(".rowCheckbox");$(this).is(":checked")?e.prop("checked",!0):e.prop("checked",!1)}))}},{key:"handelDel",value:function(){var e=this,t=$(".rowCheckbox:checked"),a=[];t.each(function(e,t){a.push(t.getAttribute("id"))}),$.ajax({url:this.props.src,method:"DELETE",data:{ids:a},success:function(){e.loadData()}})}},{key:"renderDelBtn",value:function(){return React.createElement("a",{href:"javascript:;",onClick:this.handelDel.bind(this),className:"btn btn-default left"},"删除")}},{key:"renderTH",value:function(){var e=this;return React.Children.map(this.props.children,function(t){return t.type===l?React.cloneElement(t,{onSort:e.handleUserSort.bind(e)}):t})}},{key:"render",value:function(){return React.createElement("div",{className:"container"},React.createElement("table",{className:"hoverable"},React.createElement("thead",null,React.createElement("tr",null,this.renderTH())),React.createElement(s,{data:this.state.data,fileds:this.state.fileds})),this.props.del&&this.renderDelBtn(),this.props.page&&React.createElement(u,{onPageData:this.handlePage.bind(this),count:this.originData.length,percount:"10",pagecount:"7"}))}}]),t}(React.Component);t.RTable=d},function(e,t,a){var r;/*!
	  Copyright (c) 2015 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function n(){for(var e="",t=0;t<arguments.length;t++){var a=arguments[t];if(a){var r=typeof a;if("string"===r||"number"===r)e+=" "+a;else if(Array.isArray(a))e+=" "+n.apply(null,a);else if("object"===r)for(var c in a)a.hasOwnProperty(c)&&a[c]&&(e+=" "+c)}}return e.substr(1)}"undefined"!=typeof e&&e.exports?e.exports=n:(r=function(){return n}.call(t,a,t,e),!(void 0!==r&&(e.exports=r)))}()}]);